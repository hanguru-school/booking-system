# λ°°ν¬ μƒνƒ λ³΄κ³ μ„

**λ°°ν¬ μΌμ‹**: 2025-11-27 00:32  
**μ„λ²„**: malmoi@100.80.210.105 (Ubuntu 24.04)

---

## β… μ™„λ£λ μ‘μ—…

### 1. μ½”λ“ λ°°ν¬
- β… λ¨λ“  λ³€κ²½μ‚¬ν•­ μ„λ²„μ— μ—…λ΅λ“ μ™„λ£
- β… MinIO νΈν™ μ½”λ“ λ°°ν¬λ¨
- β… ν™κ²½λ³€μ νμΌ μ •λ¦¬ μ™„λ£
- β… AWS κ΄€λ ¨ μ„¤μ • μ κ±° μ™„λ£

### 2. λΉλ“ λ° μ„λΉ„μ¤ μ‹μ‘
- β… μμ΅΄μ„± μ„¤μΉ μ™„λ£ (pnpm install)
- β… Prisma μƒμ„± μ™„λ£
- β… Next.js λΉλ“ μ™„λ£
- β… PM2 μ„λΉ„μ¤ μ‹μ‘λ¨ (booking)

---

## β οΈ ν„μ¬ λ¬Έμ 

### λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²° μ‹¤ν¨
```
Authentication failed against database server, the provided database credentials for `jinasmacbook` are not valid.
```

**μ›μΈ**: ν™κ²½λ³€μ νμΌ(`/etc/malmoi/booking.env`)μ΄ μ—†μ–΄μ„ DATABASE_URLμ΄ μ„¤μ •λμ§€ μ•μ

---

## π”§ ν•΄κ²° λ°©λ²•

### μ„λ²„ μ„¤μ • μ¤ν¬λ¦½νΈ μ‹¤ν–‰ (ν•„μ)

μ„λ²„μ— SSH μ ‘μ† ν›„:

```bash
ssh malmoi@192.168.1.41
# λλ” Tailscale: ssh malmoi@100.80.210.105

# μ¤ν¬λ¦½νΈ μ‹¤ν–‰ κ¶ν• λ¶€μ—¬
chmod +x ~/scripts/*.sh

# μ „μ²΄ μ„¤μ • μ‹¤ν–‰ (sudo κ¶ν• ν•„μ”)
bash ~/scripts/setup-complete.sh
```

μ΄ μ¤ν¬λ¦½νΈκ°€ λ‹¤μμ„ μν–‰ν•©λ‹λ‹¤:
1. PostgreSQL μ„¤μΉ λ° DB μƒμ„±
2. MinIO μ„¤μΉ λ° λ²„ν‚· μƒμ„±
3. ν™κ²½λ³€μ νμΌ μƒμ„± (`/etc/malmoi/booking.env`)
4. λ°±μ—… μλ™ν™” μ„¤μ •
5. λ°©ν™”λ²½ μ„¤μ •

---

## π“‹ ν„μ¬ μ„λ²„ μƒνƒ

### β… μ •μƒ μ‘λ™
- PM2 μ„λΉ„μ¤: `booking` (online)
- Next.js μ„λ²„: http://localhost:3000
- μ½”λ“ νμΌ: μµμ‹  λ²„μ „ λ°°ν¬λ¨

### β μ„¤μ • ν•„μ”
- ν™κ²½λ³€μ νμΌ: `/etc/malmoi/booking.env` (μ—†μ)
- PostgreSQL: μ„¤μΉ λ° DB μƒμ„± ν•„μ”
- MinIO: μ„¤μΉ λ° λ²„ν‚· μƒμ„± ν•„μ”

---

## π€ λ‹¤μ λ‹¨κ³„

1. **μ„λ²„ μ„¤μ • μ¤ν¬λ¦½νΈ μ‹¤ν–‰** (sudo κ¶ν• ν•„μ”)
   ```bash
   bash ~/scripts/setup-complete.sh
   ```

2. **PM2 μ¬μ‹μ‘** (ν™κ²½λ³€μ μ μ©)
   ```bash
   pm2 restart booking
   ```

3. **κ²€μ¦**
   ```bash
   curl http://localhost:3000/api/health
   pm2 logs booking --lines 50
   ```

---

## π“ μ°Έκ³ 

- λ¨λ“  μ½”λ“ λ³€κ²½μ‚¬ν•­μ€ μ„λ²„μ— λ°°ν¬λμ—μµλ‹λ‹¤
- μ„λ²„ μ„¤μ • μ¤ν¬λ¦½νΈλ§ μ‹¤ν–‰ν•λ©΄ μ™„μ „ν μ‘λ™ν•©λ‹λ‹¤
- ν™κ²½λ³€μλ” `/etc/malmoi/booking.env`μ—μ„ κ΄€λ¦¬λ©λ‹λ‹¤

